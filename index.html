<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes" />
<title>Programme</title>

<style>
  body {
  margin:0;
  background:#f4f4f4;
  font-family:Arial, sans-serif;

  display:flex;
  justify-content:center;   /* centre horizontal */
  align-items:center;       /* centre vertical */
  min-height:100vh;         /* prend toute la hauteur écran */
}

  .wrap {
  width:100%;
  max-width:1100px;
  padding:12px;
}

  .viewer {
    position: relative;
    background: white;
    border-radius: 12px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.12);
    overflow: hidden;
    touch-action: manipulation;
  }

  img {
    width:100%;
    height:auto;
    display:block;
  }

  /* Animation douce */
  #page {
    opacity: 1;
    transition: opacity 180ms ease-in-out;
  }

  #page.is-fading {
    opacity: 0;
  }

 .navBtn {
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  background: rgba(7, 103, 121, 0.65);
  color:white;
  border:none;
  padding:14px 16px;
  font-size:20px;
  cursor:pointer;
  border-radius: 999px;
  opacity: 0.65;
  transition: opacity 0.15s ease;
}

.navBtn:hover {
  opacity: 0.95;
}

.navBtn.disabled {
  opacity: 0.25;
  pointer-events: none;
}

  .navBtn:hover {
    opacity: 0.95;
  }

  #prev { left:10px; }
  #next { right:10px; }

  .counter {
    position:absolute;
    bottom:10px;
    right:10px;
    background: rgba(0,0,0,0.65);
    color: white;
    padding: 6px 10px;
    border-radius: 999px;
    font-size: 14px;
    user-select: none;
  }
</style>
</head>

<body>

<div class="wrap">
  <div class="viewer" id="viewer">
    <button class="navBtn" id="prev" aria-label="Page précédente">←</button>
    <img id="page" src="page1.jpg" alt="Programme - page 1" />
    <button class="navBtn" id="next" aria-label="Page suivante">→</button>
    <div class="counter" id="counter">1 / 8</div>
  </div>
</div>

<script>
  let current = 1;
  const total = 8;

  const img = document.getElementById("page");
  const counter = document.getElementById("counter");
  const prevBtn = document.getElementById("prev");
  const nextBtn = document.getElementById("next");
  const viewer = document.getElementById("viewer");

  function showPage() {
    img.classList.add("is-fading");

    setTimeout(() => {
      img.src = "page" + current + ".jpg";
      img.alt = "Programme - page " + current;
      counter.textContent = current + " / " + total;

      prevBtn.classList.toggle("disabled", current === 1);
      nextBtn.classList.toggle("disabled", current === total);
    }, 120);
  }

  function next() {
    if (current < total) {
      current++;
      showPage();
    }
  }

  function prev() {
    if (current > 1) {
      current--;
      showPage();
    }
  }

  prevBtn.addEventListener("click", prev);
  nextBtn.addEventListener("click", next);

  document.addEventListener("keydown", (e) => {
    if (e.key === "ArrowRight") next();
    if (e.key === "ArrowLeft") prev();
  });

  img.addEventListener("load", () => {
    requestAnimationFrame(() => img.classList.remove("is-fading"));
  });

  /* Swipe tactile */
  let startX = 0;
  let startY = 0;

  viewer.addEventListener("touchstart", (e) => {
    startX = e.touches[0].clientX;
    startY = e.touches[0].clientY;
  }, { passive: true });

  viewer.addEventListener("touchend", (e) => {
    const endX = e.changedTouches[0].clientX;
    const endY = e.changedTouches[0].clientY;

    const dx = endX - startX;
    const dy = endY - startY;

    const minSwipe = 50;
    const maxVertical = 60;

    if (Math.abs(dx) >= minSwipe && Math.abs(dy) <= maxVertical) {
      if (dx < 0) next();
      else prev();
    }
  }, { passive: true });

  showPage();
</script>

</body>
</html>
